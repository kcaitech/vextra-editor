/*
 * Copyright (c) 2023-2024 vextra.io. All rights reserved.
 *
 * This file is part of the vextra.io project, which is licensed under the AGPL-3.0 license.
 * The full license text can be found in the LICENSE file in the root directory of this source tree.
 *
 * For more information about the AGPL-3.0 license, please visit:
 * https://www.gnu.org/licenses/agpl-3.0.html
 */

/**
 * @description 光标样式处理
 */
import { v4 as uuid } from "uuid";

const auto = 'data:image/png;base64,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';
const cross = 'data:image/png;base64,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';
// const scale = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAU3SURBVHgB7VhNSCRHFK7uGUedGWec8W8ls2hAIhEiEkN+LkHJKWCQEHQPuXhcSAjqHgIiqGBu2Qgi8SqoJLvZQEC8CXoTT2piCP6ARsUf/I+K/3beV1M1W8oE0u2MOyT1waO6q6tfv/fVq1evmjENDQ0NDQ0NDQ0NDQ0NDQ0NDQ2N/xMMlngYlmUxwzAY2linYVjMAaQOAwrFvVNd8WCyBIKMg5FGR0cHWpMMvYt+EAldZn19vau9vZ3rxmdYciYuIXCRpJGkQ8rKyjzoI+NBhF2jDUUf9HikPkF06kAYBGPhuJfEv7m5+Xh8fPzNkpKS9Lq6Ojyza7RZVVXlhs7j4+Nvuru7I3TtI8kgcbMUigJDOOjJy8vzUxteXl7+gkixhoeH36J7r3DENgEsOvu+k5OTwfPz899aW1tfp/sASYZDnYmFmHk+SyT+rKys3PX19W8tgf7+/repP4vEI5aBHZgI+VAoFDw6OvoB+s7OzmaamppK6FmQRSPBSWQlDDLsYQhmJX9tbe0pDF1cXOQE9Pb2vgsHWJQgU3nvth7ZqtcgNpMk5+Dg4Jkk9fT09Pfm5uY38M3i4mK+HByQe2fEnM/NzcUM56+urn4HA/v6+qyGhgZubFdX1wf0LFxYWIi84EHYitB1V1ZWpqnXEOE0F+QOFo2e/P39/ecgVeqlnDDu8/kegAQxzsXuC2JfdoF9OE+GFMiZh/MYIg3t7Oz8kO5haEgQBfGLlovo99+WcDiMqMoliezs7LwAAdDd2NjIde/u7j6n+wLxvtNEa995se494sN5t51XCWhpafmI7pG4kMELBRlcxAzGrsV9odfrleNeI3lIUrKxsfGLJABCIc/1U2Q88/v9+YI0bJFOtltbMBC2kUgEazMkEx4MksapBDjBxcXFihS1XyVAJYHyw4/BYDBEfZkiCmzBbXM8Ozw8NGi9mxSCX1OCe0KVGiNjboyZmppi6HcCWloReb20tBTrp9m+MU5+s62t7RFtu3tEwpOtrS21WvxXsEUAGBclObu8vPwLbW1tLaPwv2EsrtGXbBQVFfH26uqK2zI2NibPCiwpgP8ic2MJBCksv5LhSTMXC08aYyUa6hLIzs62RkdHeT8tw6fUFxI2uS2bZbLtJUAsX1NzQWKUl5cPDgwM/FFTU/OCDApUV1ffiISFhYXvqYj50+12X3s8HrxnmabJrq+v/0l9LHxpjEHVn4tygYu2us+o6x30k/OMvsUqKirY3Nxcc2lpaT91n5Nc4t1EnhTjAiGGZIN9u6CgwBcIBMJUp7+PpCUjQUbA0NDQ5/TKQ5Hhc0jCakuVY464z4Ee5TmeYQvEjlC0vb39M3Rj5icnJ7nu2dnZJnqWR5Kl1AL3VhDx4y4JJwGG9/T0vAcS9vb2Ynv1yMjII2FkQBRDmYpkxBHZnyn0IrQfkM6fQEA851m0ynwlJTEnAZEgnAuj9FW3r4mJiU9FKSxPcKYoW+OKfCZat9SrlsLz8/ONLFogYe+XBdC9l8ISnARxTvdiPx4cHKzEoQXGzszMfEL9PjyHU3ESlFr/M3bzLGDKclgehlZWVr5k0SUSm3krBf4NqD8uMGMBKoGLKBJ+pYT4sTywMGfHYb7jEKEDtMc/RjSJpcF/jLBXOPMxYAaslz9E5CHGKyRdbJtODJX/GdKmp6dLRfUJ3WksVZxXIUgwEOrylCfEaX0ulwfe5+Syl47zH68pCRkRyn9Aw+k6laTekoQiWQlE6r3zNN0mL+mFjoaGhoaGhoaGhoaGhoaGhoaGhsZ/Gn8Dv+83zatlUcwAAAAASUVORK5CYII=';
const scale = 'data:image/png;base64,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';
// const scale = 'data:image/png;base64,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';
const rotate = 'data:image/png;base64,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';
// const rotate = 'data:image/png;base64,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';
const extend = 'data:image/png;base64,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';
const comment = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAP/SURBVHgB7ZnPS1RRFMfPmxl1zPyRYUlaTIsIhGDCNq2sCFpUIITrBvdKrluM0jp04TJQ/wTXLppWLiQcSSwisEAhEFEbzRmd8fX9vnlXnmaINe/dN3E/cHj3/XDuOeeee+69RxGDWFIl2LZ9D5ckpMe9Jjyvs5BNyDQkY1lWVv4naDzkrX025iEpqXZgRMJr/MbGhj02NmanUik7kUjYLS0tNj+jJJNJu7e3156cnLSXl5e9zuBNQqoRKP6cdivjh4eHjxh9mtBRHmfwd15INQGF00p7jvxZjPcKo4WR4SEt1QBHTGnM0Ze/MP648HcUxWIxJWFmd3f3upoClXKA/O6IDfYjIcU6ODj4Si0nJiYq6gAlnFoE/WRwH5Gwsbe31++kciQzzmXxwQnMLUyyBNHwQEKGVSqVFqgcs7r44AA5Ni2QG95JmKJhbW3tjooC8dEBciwaNjc3HyoddHvDqq+vv89GJpMRv4HhMjU15bRjsdhtce3X6oTu7u5YXV3dU7anp6clCLLZ8rGipqamR0IyJeJIih8Yntz6is/TgcLES5CHvnV2dtaL5kMkOz+vFnAJwAHi5gVPn+zf0hYOZR0kKgHDvKCAQ2I4dutzwsjICCNB65xkFIhuJZqamgKfj8g9zjWfz3/c2tpy2jHRiBqJIEFidK5IjLnm5mYZGhoK4R7aZ1B8ca4rKysziIQD0UlfXx+TYmvQq4MqtmDT9KStre286FwisY+PICcE6gSeTcj29vaneDx+LQz7hEAjgZskFQWzs7Mv8ewypEZ0wkhAYroQlBNUqQ2rwirub7a2tjZRB9FMYNMhnU47fezv7+cGBgYe49mVrq6uWtH9fxd3FHx3gnIAmZube41nNyDNbmLWC5XwMxJ4RhgdHT10wMLCwpva2tpbeHdJdOcCD75EAo3n6KviCafAzMzMK7xLonbRies5CUtVqVLTgUYz83P5YzFVGU/W19fn+/v7n6F2wL3yVXdfoH8aeDiyRFYSGj8+Pj6I37/rToEOCB1wYgToPDtwJC0UVVahaIf8A1j2viMCvoDs4uLi58HBwfcopuZRtdopFAo8O/+AFCAnbpO1OQHTQRC+JSj6CLctqPlFoXhZqViMFWHLbYt6fgzHie6V8KMSQn8vGo3u4G9+NjQ05OCEvPvuj+cEnesk+27A9vUiRrIR0RBBVBz5AAZZSGyHxuIbUd+4bfWshEf7kAIML8Cxu+3t7fmlpaUipwfqJvZpiuiCfTMvxKW8ZEUaGxsll8t5R/iIfu57b1sZRyeo0S669yp5hpvyouAYGnFXi0Nx76PetrvBcdre7+1yXcIrBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBoJ1fvWrb7M26VTYAAAAASUVORK5CYII=';
const scan = 'data:image/png;base64,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';
export const pipette = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABV9JREFUaEPtmG1oVXUcxz8+zpZbLgcuTHDOF6OYsGoTI3IyMG14Hex67waJFERBqdALfZNDDLIoexG9qCjyTTBQat7bwoXMXRTntm4OFnIFr2srkPWc7VG7M77z/1/zsrvOuWdXEe4fDmdnnHPu5/f0/f3Ofx73+Jp3j/OTNeBuRzAbgWwEPHogm0IeHej58WwEPLvQ4wuyEfDoQM+PZyPg2YUeX3AnIqDfmH4I+aY5JjzyZ3wanQ8sNMciQNeCTwD/ADfM3/pfWiuTERDsYmAJ8BDQBDwM/A58B+wGRoExY0xaRmTKgAUGPhd4HAib6+le7gJqgSFjiCLiemXCAAt/P/Ak0GxqYCa4o8B+4BowbtLLlRFzbYDgcwDBPw0cmwVeoD8BT5m0GjH1cFcMkCOs55cC1cDn/wMv0D+BSuAXk0qu0yjdCCRLoy1YeX4r8JlDN8ZMHfwM/G2K2eGjt25LxwArjfL4I8BlQBK5pKys7FBvb+/zDgmkQLuAKPCbiYDk1dVKxwDBSh7l5TLgVeVyeXn5hxcuXKhy+OvS/zeBL036KJUkp64bWzoGCP4+IAB8DMRLS0uvxWKxcofwyvN3jDr9CvwBDJum5roXuDVA91uVeQDwFxcXv93X1+eQfdLD703zvIWXhLr2fjo1oPxXZxX88rq6uj0tLS0vjo+Pc/OmI+cJ/gvAel5NTPCuc996zG0ElP/qrg8Gg8G9J0+e3LNy5cp5hw8fZseOHVy/fn22SLxv+sJ0eOV92vBuI6ChTN7Pa2ho2N3a2rq/qKhofkdHB/n5+USjUTZs2MCNG6rP21dJSUkkHo83moLVLGQ971r3k9/tNAKCV+4vra+vf7mtra2xsLBwCt6+VLWwdu1aJib+S+fS0tLeWCy2F5DWC96ODZ7hnUZgCr6hoeGFSCTyxrJlyxZYzyd75OrVq6xatYpEIkFxcfEPfX19rwCDxgDJpfR/TuCdGDAFHwgEnuvo6HgrLy9vYSr44eFhqqur6ezsZMWKFQwODg4ArwPdpnDVbVUojireibTNlkJTg1kwGKzv7Ow8kpubu2g2+M2bN3Pu3Dm2bdv2TTgc/h54TX0CeAn41uj9nHl/tgjIMDWspYFAYGs0Gv00JydncSr4kZERtmzZwpkzZwT/dTgc/sjMNhrUNNjtMyOH0seT6jgtYqWOum3B+vXre/r7+wsuXbo0qTbJa3R0lJqaGk6fPo3P5/sqFApJLpUq6q4akeVxXQte6XNHDJDi5Pt8vmdDodDRpqYmgsHgjPA+n49Tp05Z+CNmNBCwNF7AMsB+/0pj0+q4qephphpQt51sVn6/f9fx48cPxeNx1qxZc9s7xsbGqK2tpbW1dTq85nopjTxvva2CFbQ95qyAU9WAcl+58qjf7393YGDgCaVIY6P60K2l0aGuro6WlhYZEW5ubtaIIHjNNvK+xgN5fTrsnIKnGiXsrFOwcePGUCQSeayqqor29nYOHjzIzp076enp4cCBA1y8eNHCK23seGBTJxneiSKmdU9yCkk69VW1HLgieBXnpk2bJo2wa926daOrV68Oh0KhD8zHiNLmjsPPlEIyQN+0hdu3bz924sSJchuBmpqay4lEom1oaOjHs2fPnjcjwV/mrNnG0/5OWu6f4ZPSRqAAeKaysnJfV1dXSUVFxZXu7u5PAO3lCFYSac+Sx5lyPl0mV88lp5CtgTwz8+usCVQFKEjBCt5CS2k8bw+6Ik66OdkAXU9+oJtGpmampiYDBKs00SFoFaqVRi8Mnp5N1QfshqzOdkPWNiQLnhFZdGtNqmHO7vsI3i55226Lu/2djN3v9IMmYwBeX/wvm6rTQFcM4lMAAAAASUVORK5CYII='
export const copy = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABDCAYAAAAs/QNwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkJSURBVHgB7VpbbBRVGP633d5b2lqgCojtAkEpCFKRoMbwYMIjJIRnaKIYHwSMwcQnqL4SIRCLQu3lgURAhXh7ISFNhHCRgKRAkEBaoOFSrqWl293t7vH7zp4ps+NuoXYWFpg/+XNmZ8/Mzvf913NmRTzxxBNPPPHEE0888cQTTzzxxBNPPPHEE0888eSRRSnlg1ZDV5hjnzwPYgObFQwGAzhWsVisDcfVPIePnPbskkGA69evz8Khv6amJhef7ygj0Wi05e7du4Fn2hsMuGxoTmVlZRFAX1Q2gTd04tynJMkQ5SSDn+dAq8z95KkijA+7cOFCf1VVVT4+lsL1fydwgFUtLS0JRAwODtYZEiyQPn7Oycl5g6eg68eMGfPC05ZDtPvT+iUlJWNv3bq1nYDXrFlDQGrFihWqo6NjiAiQ0GpyhQa/bNmy7OLi4vESJ4DaAa0z9/VJpucPywNIAICMO3369GcE2tzcbAHSSkKcRFy+fHna1KlT8/B9IfSufb7EiQhY3pCxHuEk4OjRox8S4IkTJxIIoCJM/hMWSJIrA4FAqc/naxdDFOfZrmsVGxHmNyWjhG48YcKEQobAhg0b3iU4WlscBIiNiD179ti94VJdXV07SBgiaN26dc7r6q0kmonewCrAJFiRn5//CrJ+D0GUlZWlJEGS5AeGDRXXK4tEzrFd05mdna0TaUaRQA9gLANwWUFBwcuhUKiLAObMmTMsAZayYtiJQGgMqRVOjrD4GxqwiMgEMrLYBGEshU68c+fOPj64w3rDqjM/mEZqyBssD0mWHyQeFvIkxVdbW5szduzYksLCwpeuXr3abC+FI1ECpMVTEUFPceSHDjH54Yl5gvlhPwnAWHny5Mm1yUrhSNSZH5xhkSQ/dNjygzxu0aWQlYBNzeHDh1emKoUjVeaHZN5gEcFq4giLveLoH9LuGeYHRlQKR6Kp8oNFQor80IKKFFCPK0nS9SZNmlTAXp6l0Hqwh5XCkSirij0sKOghhiubHWJrq9MaGiTAtLXl9lLosIormio/WJKKiHQnSh9LYXl5eUIpXLJkiesEIN9ol7eLM0laYeHwQHvZTFho+WWUQveaOXOmsJ3Fx9jAwEAXz8MDxC0BcEEJ1KMl+B2JRCKCCiBYVuuxp6dHWltbZe/evYK1hv0WBB9A43aRzyhxUrSMmgAKVoJq3LhxvHHs/v37l3lu9uzZMhqBBWX16tWCnkIfUxD3cvv2benr6yPhgt5DkHekt7dXGhoaZMuWLQIPtG7Rm5WV1QxyGjCnG+SEbty44auvr7esr0kYNQF8ELrmuXPnYiiFsZs3b3ZNmTJFEBLyf4RWJnCE0NA5WpbAsecgAKVBUw8cOCCbNm2SgwcPak/ks0BOQNv8fv/P8IobmB/E9dkwUBYIYFKMafRmvishwBuhFHKM4aHOzJ8/f8QeQEsvXrw4wc0JHHsH2uJ0cYDS7r5jxw7t5mfOnNHz8Lt9GP7E+Afm/IXQGATwMBKyQmK2APvgqTJjxgyyFDNkubPrwizb2NiYB1fMD4fDJf39/Yw17QWOWEwqSFqC7K2P6eZXrlyRa9euCRKbBkzgFni6+ubNmy3i+6A/QXdCe3Jzc0MAH4VG8vLywiAhhF2oEJ5joKioKIxqFWlra2O2dJcAsjtt2rTc8+fPc4enGMwfwsNMrK6uls7OTnkU8CQKewOCB5VVq1ZpwFaCAxg90t03btyorwO4BuiPOAwBTBi/R9xhHEfw+2HkhwiuD+O6CI9LS0uj8IDB+OMqK2m7JkOlEC73yKWQixsKvKZv6dKlW3hu+vTpqr29XZ09e1ZduHBBXbp0ScEbFBKc4kNTAbwJc98GuDdB2OvoQl8FQGb6l/G5kk0ZZIzEt9zy2K5LfO9Cl0DXewLekASYH30JD9xEYMOtCi3wsFrv2rVrP4a1PiA4PLxuaLq6utT169cVyFRbt261g/8ewN+CxTVwJMMqWHgCW/GyeLkoYWeKMQfqd+wdpKcZUmZ/EJm2mBZAKHxpNSTDgafs3LnzC7j7e9D3AbCX3+N6hQSokPzUtm3b9DUGfCOtDvAz2O/j/ETuR0p8P6IIms/lOTdqbMAl7WLYpZsV2VeFyNTDgt+3b99XtKalAPkPgR46dEgxgx87dkx3dAb8dsypxT0IvhpEvwi3L+dCTGxunlZLDyM+sm7eEVQgUb1j9eapwO/fv7+eL0ZgzZm0KEcA/YVgm5qa1PHjxxVyih38XAO+il7GcKOrWxZ/UsATCDCxl3RVaAd/5MiRrwGIr8UYwwHOhzWnACh7dp08Cd4Q94PN8lUY+TKlxLyRylYqQzZJ+SBcFdItnavC5cuXD4FHht+O6bT8q5g3ma48fvz4Sl4DAj6XxJD5DVqLuTV2y5vVJ10+c3aImXSSbZDaV2+nTp3aZt4HavAYdeamIIG+CAI+EgMerv8rLW/AV5vXaKwy+fQ2ia/1M0eMK7L06FJobZA6LE9Xfg06mdmbVWPBggUF1vtFVIJ3JU7AX1ASVQNlwqvkfen2BrxrlneVRSQk4aoQDzy0KqTA8o1z5879FodBWDPIER4QhOuHFy1aFEG9Z2sag8U78d0R6CewPOf1U3GvAYyhefPmRXbt2pWwnB2tuEYAl5l41xeDG9N9Y1i9aQLQ0X03a9asrTg3QPBoeIKI4xByRQStaRSLE50n7t27F0XfzlZ1JbQb3WE/vOQ+5gbxfQiWH9y9e3fM7RbWNQK4i8sRAFm2onhZegrLzz1YFX6D00ECwiZGP/p6TQCanSjOx7CiUxUVFVGEAcGHod3o7IIIiX54wQCIDIOAQbctnw7R7/2tP0zwRQnGatOxTbbHMUa/oz3Vr9iYE5gQzfZasTxocNK3nycuCgFheyynu7s7F9bOw64tqwK9IoL4DqPP19YEqJjxGGWega203rBAWJBEriL5nfYSJlG3XT8tYq0JJP7GOMGatLDNmj7ndRIPx2zOYaa3dXdPjyjz9xcc5phmpYAub/oDfypA6sEfIHy2LezHAt71EODIigBX1sfciMQujIp//WAn5iH3UA+b55a4/isqyR8kDZjMj2E3RannC+9TK/8CbhDDlJ3FSjsAAAAASUVORK5CYII=';
export const pen = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJESURBVHgB7Zm9jcJAFIRHuojMJTi9jJBwSyC87NwBdIBLcAe4A64D3AEhISVAB3s7sGuWHxvzI7Rr3ieNZARYmrdv3voHEARBEARBEARBEARBEARBEARBEIRXMzTaWi2MMqMUH8TGSF/R0miKQ4F6DVe+Nq6UulYMFmluNMab+ML7+Ia3ykmSYL1eYzQaYTAYYLfbUYn9zY9Rbo8HRjurqFFGOk3TvXg8HA71drvVjtVqpYuiaOqOlVFhzxMlXN19DGi0qQiOzWaj5/O5Ho/H2nRLW1QSRERptF9lGrxVBJ/lcqmzLKv/g8tBmiGCXUXBDkC3yvcUoUNU2GEpAqaOgTP7aBEc/D2j4hWjQOCUsDHw8/5MEQgjgmMXBI2CF4NXFsEblgoBcxGDVxVhOp3GG4OmIlD8zI7hd21EH4NrRfDFFucO0Eb0MXA07Pf7a4E2ehEDgut3jo1d4+hNDJh9PNABpBcxWCwWF+YZi1uDkPQmBmxndgi7gSvfxbz7H/oQg2fAsXN+ETA3d4NHYLfgND5BF6FESwweNc9BOJlMoiiCwoti4Jt3F0yz2cyfB0E+eK1j0HXIdTXv8HaFPwRKCbvN3TPtu5gnPB8C3xVSowpnV3xlWT5tnnDAIpJtMcWhG+p3CG1d0cU84RMje74KkcC5kOHsbRKfEFdVdZd5fuddGmeIEAU7I+DdFuN+8zkiJ8VZV7TdGPXN/Dk5bBHyPP84844cXhE46SneRX6CeUeOhgcn+ADzDoXTawgeZxAEQejAP1zPK4aP9mgsAAAAAElFTkSuQmCC';
export const de_auto = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABDCAYAAAAs/QNwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUxSURBVHgB7VrPT6NVFL1taYFCS6kg8mPGdqSj4o/pDPFXNBFdGDVB0YS1uHJlAkYTXYH+BbjSuBDWJiZs3GgiYW8EN7oEo44LSAAHhyEzw5tzvvcelI92Ap3S9uu8k5y8Thnod+999557L4g4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhUFhnDukNEzh4hsBNcBlvB38Abcp8gNDMzE8bZBCrDVfB9pVRIGhnGQBofzWQyLTjX5NAJB44AQw3pDBo1Pj7OFGsGE+APfHtsbEzBIX5HvCI6VRoKNIgOYN6zBnwDKqSEIubm5vyOmAcvSAM5goYw9+OJRKIL50egmpiYUBarq6tqenq60AnWEdlGSAvvBvT09LThpAPeAFU+n1d+0BF0jBx1xOfgBXxZggqvCA4MDDAF0uCLoEqlUqoUijjCFsqwBDA1bA2gAnS2traew/kfqNbW1tTdsLy87N0UOeqIicClhXlgqkAKDhjA+TvfXlxcVCdBkUJJR7wqAZJOPmSss7OzA2cv+D2o5ufn1WlQTDFaWlqyEoC04ANGwURbW9tDOL8E1eTkpCoHVIwi0lnXjrDNEJXgQfBjMc1QubiLYtStdEZ6e3u9XiASibyJf3tRvFcERTHsDfCkMBaLPSXmgSsFOmJkZKTojCH1AKWvpSeFIJXgbzmBFJ4WJRTjHX6+qnEz5SkBSCXoB38C1cLCgqo0Njc3/f0DuZBMJtNS4kaEpQoYHh5WXV1d+/F4nA/EZkhwA6RSWFpakqmpKclms7KysmLf5ud8DX6Vy+WuYQijA2qSFnYoaocU9uD8QnxDUbnRnp2d9ec/+Qv4Gfgk2C16FI+ZWnTMAU1y9rAJqEKh0L7oGiBbW1tSDhhtpI+gmSr8GTvgd+DPorvNPfAGblwTCm8E80d4fX19X2oIej8ueip8ScqQwhLR/hX8FHwNfA68AlJpLoLnzY1LDg4Osh1nsGujDNwLmqnwAfBhMQbwGp8EPr2/Bn4Lvgc+Dz4DXqbEgo/h9SPgOWN8SrTj2Y1Wpd6VQthEgQ/EqdCTQk59pzD+X/BD8AXR0R6ORqN5nE+AOdFr9/729nZ2nKz6zP1WFGAaX7voG9D7dEAS7AN/lBMMRT7j3wWfhdGXRV/zx0VH+7zoQasLuZ7iAsYsYWNImSY57Axr6oCDoQjkUDQnBftBP5gaBfl+FRwDr5hOkvmdAfvNNU9DYhNst80t4+dEzDq+flpiMesx89CfSAkp9DUzVzE/0Pi8ye+MFERb9JDFaEdttJXuPOtvKDIPaPeD3lDk3w/6jRcd+Uvgo6JrR3c6nU76o60CsBw5WJFjKqQSHNsPFjH+bfBSc3PzRbNN4ve1g83GmV5jo3SfH4jtEHPSDkVH9oNFjH9LdOSZ7zSeVZ23J8bcDkLEj8EUJSuFHIr+ELMf9BuPSs/I58z/S/PKi5ayQG6HLUJDQ0OcCq0UevtBpoEcjfzTonW9r6Ojg7clbrQ80MZbRClZOKkE3n5QihiPnO83xrN79Iw/q2tf7fZQbWxsKHRrNPov8x6N/wDX/k+cuxhg/t/d3b2+vb3NvyG4iSmOQwwHqdpuNSoAqwRxowT8Vdk/4Oui29lBGM/UYMHzIl9vzcw9o2A/yOs9BL5MmRO92u4z7/PrhU1NQ4ER9Qoh0qDb6LsdYLzJraDgVe2Bqgaluxbm9K2dnZ095jpeX8dr5vsejL85Ojp6Ww6XKGeOWlwxpkG44CRuG+4bNjRsMWyyZG0wBe++gf3rsXDDVXqHgOEONuYyL5lnAxQAAAAASUVORK5CYII='

export interface StyleSheetController {
    getId: Function
    setup: Function
    remove: Function
    getClass: (type: string, rotate: number) => Promise<string | undefined>
}

const getBase64ByType = new Map([
    ['auto', auto],
    ['cross', cross],
    ['scale', scale],
    ['rotate', rotate],
    ['extend', extend],
    ['scan', scan],
    ['comment', comment],
    ['pen', pen]
])

const hot = [16, 16]; // 光标热点在svg的位置

// 返回一个StyleSheetController对象
export function styleSheetController(): StyleSheetController {
    let styleSheetId: string = '';
    let style: HTMLStyleElement;
    const classList: Set<string> = new Set();

    async function appendStyleSheetForCursor() {
        style = document.createElement('style');
        style.type = 'text/css';
        const temp = uuid().split('-');
        styleSheetId = temp[temp.length - 1] || 'cursor';
        style.id = styleSheetId;
        // 预设一个auto
        style.innerHTML += await getClassString('auto', 0, styleSheetId);
        classList.add(`auto-0-${styleSheetId}`);
        document.querySelector('head')!.appendChild(style);
    }

    // 根据id移除一个<style>标签
    function removeStyleSheetForCursor() {
        if (!styleSheetId.length) return;
        const style = document.getElementById(styleSheetId);
        style?.remove();
    }

    // 向style标签里面插入class样式
    function appendClass(clsName: string, cls: string) {
        if (!style) {
            return;
        }

        style.innerHTML += cls;
        classList.add(clsName);
    }

    async function getClass(type: string, rotate: number) {
        const deg = findNearestMultipleOf(rotate);

        const clsName = `${type}-${deg}-${styleSheetId}`;

        // 如果获取的过程中无法从已有的样式库中取得样式，则先创建一个样式插入到样式库
        if (classList.has(clsName)) {
            return clsName;
        }

        const cls: string = await getClassString(type, deg, styleSheetId);
        appendClass(clsName, cls);
        return clsName;
    }

    async function getClassString(type: string, deg: number, id: string) {
        let source: string = getBase64ByType.get(type) || auto;

        let str = `.${type}-${deg}-${id} {`;

        const result = await rotateBase64Image(source, deg);

        if (!result) {
            return str + '}';
        }

        source = (result as string);

        let __x = 16;
        let __y = 16;
        if (deg) {
            const radians = deg * Math.PI / 180;
            const cos = Math.abs(Math.cos(radians));
            const sin = Math.abs(Math.sin(radians));

            __x = (32 * cos + 32 * sin) / 2;
            __y = (32 * sin + 32 * cos) / 2;
        }

        switch (type) {
            case 'auto':
                str += `cursor: -webkit-image-set(url(${source}) 2x) 13 13, auto !important;`;
                break;
            case 'pen':
                str += `cursor: -webkit-image-set(url(${source}) 2x) 13 13, auto !important;`;
                break;
            case 'scan':
                str += 'cursor: text !important;'
                break;
            case 'grab':
                str += 'cursor: grab !important;';
                break;
            case 'grabbing':
                str += 'cursor: grabbing !important;';
                break;
            default:
                str += `cursor: -webkit-image-set(url(${source}) 2x) ${__x} ${__y}, auto !important;`;
        }
        str += '}'

        return str;
    }

    function getId() {
        return styleSheetId;
    }

    return {
        getId,
        setup: appendStyleSheetForCursor,
        remove: removeStyleSheetForCursor,
        getClass,
    };
}

function rotateBase64Image(base64Image: string, angle: number) {
    return new Promise((resolve, reject) => {
        const image = new Image();
        image.src = base64Image;
        image.onload = function () {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            if (!context) {
                return reject('canvas api error');
            }

            const radians = angle * Math.PI / 180;
            const cos = Math.abs(Math.cos(radians));
            const sin = Math.abs(Math.sin(radians));

            const width = image.width * cos + image.height * sin;
            const height = image.width * sin + image.height * cos;
            canvas.width = width;
            canvas.height = height;
            context.translate(width / 2, height / 2);
            context.rotate(radians);
            context.drawImage(image, -image.width / 2, -image.height / 2);
            const rotatedBase64Image = canvas.toDataURL('image/png');

            resolve(rotatedBase64Image);
        };

        image.onerror = function () {
            reject('Invalid base64 image');
        }
    });
}

function findNearestMultipleOf(num: number, step = 3): number {
    if (num < 0) {
        num = num + 360;
    }

    let closest = Math.round(num / step) * step;
    if (closest < num) {
        closest += step;
    }

    return closest;
}