<script setup lang="ts">
import { RouterView } from 'vue-router';
import { nextTick, onMounted, ref, watch } from 'vue';
import { useRoute } from 'vue-router'
import { useI18n } from 'vue-i18n';
import { router } from '@/router';
import { createDocument } from '@kcdesign/data';
import { Repository, CoopRepository, Document } from '@kcdesign/data';
import { DocEditor } from '@kcdesign/data';
import { FilePicker } from '../common/filepicker';
import { LzDataLocal } from '@/basic/lzdatalocal'; // todo
import { importSketch } from '@kcdesign/data';
import { Zip } from "@pal/zip";
import Bus from './bus';

const { t } = useI18n();
const route = useRoute()
const active = ref(true);
const title = ref()
const recycle = ref(false)
const elwidth = ref()
const elleft = ref()
const myfile = ref<HTMLElement>()
const mydel = ref<HTMLElement>()

const emits = defineEmits<{
    (e: 'dataUpdate', list: any[]): void
}>();

//===>Apphome组件接收
const update = (data: any) => {
    //main目录下传过来的lists和title
    emits('dataUpdate', data,)
}

const highlight = (state: boolean, e?: MouseEvent, path?: string,) => {
    active.value = state;
    if (path) router.push({ path: path })
    if (e) {
        const rect = (e.target as HTMLElement).getBoundingClientRect()
        elwidth.value = rect.width
        elleft.value = rect.x
    }
}

enum titles {
    recently = 'recently',
    starfile = 'starfile',
    meshare = 'meshare',
    recyclebin = 'recyclebin',
    shareme = 'shareme',
}

const settilte = (title: string) => {
    switch (title) {
        case titles.recently:
            return t('home.recently_opened')
        case titles.starfile:
            return t('home.star_file')
        case titles.meshare:
            return t('home.file_shared')
        case titles.recyclebin:
            return t('home.file_shared')
        case titles.shareme:
            return t('home.shared_file_received')
        default:
            break;
    }
}

function newFile() {
    const repo = new Repository();
    const nd = createDocument(t('system.new_file'), repo);
    const coopRepo = new CoopRepository(nd, repo)
    const editor = new DocEditor(nd, coopRepo);
    const page = editor.create(t('system.page1'));
    editor.insert(0, page);
    window.document.title = nd.name;
    (window as any).skrepo = coopRepo;
    (window as any).sketchDocument = nd;
    router.push({ name: 'document' });
}

const picker = new FilePicker('.sketch', (file) => {
    if (!file) return;
    const lzdata = new LzDataLocal(new Zip(file));
    const repo = new Repository();
    importSketch(file.name, lzdata, repo).then((document: Document) => {
        window.document.title = document.name;
        const coopRepo = new CoopRepository(document, repo);
        (window as any).skrepo = coopRepo;
        (window as any).sketchDocument = document;
        router.push({ name: 'document' });
    })
});

watch(() => route.name, () => {
    recycle.value = false
    if (title.value) title.value = undefined
    if (route.name != undefined) {
        title.value = settilte(route.name.toString())!
        if (route.name === titles.meshare || route.name === titles.recyclebin) {
            recycle.value = true
            if (route.path === '/apphome/meshare') {
                nextTick(() => {
                    elwidth.value = myfile.value?.getBoundingClientRect().width
                    elleft.value = myfile.value?.getBoundingClientRect().x
                })
            }
            if (route.path === '/apphome/recyclebin') {
                nextTick(() => {
                    elwidth.value = mydel.value?.getBoundingClientRect().width
                    elleft.value = mydel.value?.getBoundingClientRect().x
                })
            }
        }
        if (route.name === titles.recyclebin) {
            highlight(false)
        } else {
            highlight(true)
        }
    }
})

onMounted(() => {
    if (route.name === "recyclebin") {
        highlight(false)
    }
    if (route.name != undefined) {
        title.value = settilte(route.name.toString())!
        if (route.name === titles.meshare || route.name === titles.recyclebin) {
            recycle.value = true
        }
    }
    if (route.path === '/apphome/meshare') {
        nextTick(() => {
            elwidth.value = myfile.value?.getBoundingClientRect().width;
            elleft.value = myfile.value?.getBoundingClientRect().x;
        })
    }
    if (route.path === '/apphome/recyclebin') {
        nextTick(() => {
            elwidth.value = mydel.value?.getBoundingClientRect().width
            elleft.value = mydel.value?.getBoundingClientRect().x
        })
    }

})
const show = ref<boolean>(true)
Bus.on('test1', (b: boolean) => {
    show.value = b
})

</script>

<template>
    <div v-if="title != undefined" class="title">
        <div v-if="recycle" class="indicator" :style="{ width: elwidth + 'px', left: elleft + 'px' }"></div>
        <div v-if="recycle" class="container">
            <div ref="myfile" class="title-myfile" style="cursor: pointer;"
                @click="highlight(true, $event, '/apphome/meshare')" :style="{ opacity: active ? '1' : '0.5' }">
                {{ title }}
            </div>
            <div ref="mydel" class="title-mydel" style="cursor: pointer;"
                @click="highlight(false, $event, '/apphome/recyclebin')" :style="{ opacity: active ? '0.5' : '1' }">
                {{ t('home.recycling_station') }}</div>
        </div>
        <div v-else class="title-text">
            <div class="left"> {{ title }}</div>
            <Transition>
                <div v-if="route.name === 'recently' && !show" class="right">
                    <div class="newfile" @click="newFile">
                        <svg-icon icon-class="addfile-icon"></svg-icon>
                        {{ t('home.New_file') }}
                    </div>
                    <div class="openfile" @click="picker.invoke()">
                        <svg-icon icon-class="open-icon"></svg-icon>
                        {{ t('home.open_local_file') }}
                    </div>
                </div>
            </Transition>
        </div>
    </div>
    <Transition>
        <div v-if="route.name === 'recently' && show" class="newandopen">
            <div class="newfile" @click="newFile">
                <div class="left">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                        version="1.1" width="24" height="24" viewBox="0 0 24 24">
                        <defs>
                            <clipPath id="master_svg0_1_720">
                                <rect x="0" y="0" width="24" height="24" rx="0" />
                            </clipPath>
                            <clipPath id="master_svg1_1_725">
                                <rect x="13" y="13" width="8" height="8" rx="0" />
                            </clipPath>
                        </defs>
                        <g clip-path="url(#master_svg0_1_720)">
                            <g>
                                <path
                                    d="M6.149989948242188,18.975L10.950006948242187,18.975Q11.009096948242188,18.975,11.067056948242188,18.9635Q11.125016948242187,18.951999999999998,11.179606948242188,18.9294Q11.234206948242187,18.9068,11.283346948242187,18.8739Q11.332476948242189,18.8411,11.374266948242187,18.799300000000002Q11.416056948242186,18.7575,11.448886948242187,18.708399999999997Q11.481716948242187,18.6593,11.504326948242188,18.6047Q11.526946948242188,18.5501,11.538476948242188,18.4921Q11.550006948242189,18.4341,11.550006948242189,18.375Q11.550006948242189,18.316000000000003,11.538476948242188,18.258Q11.526946948242188,18.2,11.504326948242188,18.145400000000002Q11.481716948242187,18.0908,11.448886948242187,18.0417Q11.416056948242186,17.9926,11.374266948242187,17.9508Q11.332476948242189,17.909,11.283346948242187,17.8762Q11.234206948242187,17.8433,11.179606948242188,17.820700000000002Q11.125016948242187,17.798099999999998,11.067056948242188,17.7866Q11.009096948242188,17.775,10.950006948242187,17.775L6.299996948242187,17.775L6.299996948242187,5.1L14.826436948242188,5.1L17.099996948242186,7.3735L17.099996948242186,10.87496Q17.099996948242186,10.93405,17.111496948242188,10.99201Q17.123096948242186,11.04997,17.14569694824219,11.10456Q17.168296948242187,11.15916,17.20109694824219,11.208300000000001Q17.233996948242186,11.25743,17.275696948242185,11.29922Q17.317496948242187,11.341000000000001,17.366696948242186,11.373840000000001Q17.41579694824219,11.40667,17.47039694824219,11.42928Q17.524996948242187,11.4519,17.582996948242187,11.46342Q17.640896948242187,11.47495,17.699996948242188,11.47495Q17.819396948242186,11.47495,17.929596948242185,11.42928Q18.039896948242188,11.383610000000001,18.12429694824219,11.29922Q18.208696948242185,11.21483,18.254296948242185,11.10456Q18.29999694824219,10.994299999999999,18.29999694824219,10.87495L18.29999694824219,7.3114Q18.29999694824219,6.87652,17.992496948242188,6.56893L15.631096948242188,4.207597Q15.323576948242188,3.9,14.888616948242188,3.9L6.149996948242188,3.9Q5.715073148242188,3.9,5.407534948242187,4.207538Q5.099996948242188,4.5150762,5.099996948242188,4.95L5.099996948242188,17.925Q5.099996948242188,18.3599,5.407515948242187,18.6675Q5.715053248242188,18.975,6.149989948242188,18.975Z"
                                    fill-rule="evenodd" fill="#000000" fill-opacity="1" />
                            </g>
                            <g>
                                <path
                                    d="M8.70001220703125,8.1L11.70001220703125,8.1Q11.75910220703125,8.1,11.817062207031249,8.088471Q11.87502220703125,8.076942,11.929622207031251,8.054328Q11.98422220703125,8.031713,12.03335220703125,7.998882Q12.082492207031251,7.96605,12.12427220703125,7.924264Q12.16606220703125,7.882478,12.19889220703125,7.833342Q12.23172220703125,7.784207,12.25434220703125,7.72961Q12.27695220703125,7.675014,12.288482207031251,7.617054Q12.30001220703125,7.5590948000000004,12.30001220703125,7.5Q12.30001220703125,7.4409051999999996,12.288482207031251,7.382946Q12.27695220703125,7.324986,12.25434220703125,7.27039Q12.23172220703125,7.215793,12.19889220703125,7.166658Q12.16606220703125,7.117522,12.12427220703125,7.075736Q12.082492207031251,7.03395,12.03335220703125,7.001118Q11.98422220703125,6.968287,11.929622207031251,6.945672Q11.87502220703125,6.923058,11.817062207031249,6.911529Q11.75910220703125,6.9,11.70001220703125,6.9L8.70001220703125,6.9Q8.64091740703125,6.9,8.58295820703125,6.911529Q8.524998207031249,6.923058,8.47040220703125,6.945672Q8.41580520703125,6.968287,8.36667020703125,7.001118Q8.31753420703125,7.03395,8.27574820703125,7.075736Q8.23396220703125,7.117522,8.20113020703125,7.166658Q8.16829920703125,7.215793,8.14568420703125,7.27039Q8.12307020703125,7.324986,8.11154120703125,7.382946Q8.10001220703125,7.4409051999999996,8.10001220703125,7.5Q8.10001220703125,7.5590948000000004,8.11154120703125,7.617054Q8.12307020703125,7.675014,8.14568420703125,7.72961Q8.16829920703125,7.784207,8.20113020703125,7.833342Q8.23396220703125,7.882478,8.27574820703125,7.924264Q8.31753420703125,7.96605,8.36667020703125,7.998882Q8.41580520703125,8.031713,8.47040220703125,8.054328Q8.524998207031249,8.076942,8.58295820703125,8.088471Q8.64091740703125,8.1,8.70001220703125,8.1ZM8.10001220703125,10.5Q8.10001220703125,10.55909,8.11154120703125,10.617049999999999Q8.12307020703125,10.67501,8.14568420703125,10.729610000000001Q8.16829920703125,10.78421,8.20113020703125,10.83334Q8.23396220703125,10.882480000000001,8.27574820703125,10.92426Q8.31753420703125,10.96605,8.36667020703125,10.99888Q8.41580520703125,11.03171,8.47040220703125,11.05433Q8.524998207031249,11.07694,8.58295820703125,11.088470000000001Q8.64091740703125,11.1,8.70001220703125,11.1L14.70001220703125,11.1Q14.759102207031251,11.1,14.817062207031249,11.088470000000001Q14.87502220703125,11.07694,14.929622207031251,11.05433Q14.98421220703125,11.03171,15.03335220703125,10.99888Q15.082492207031251,10.96605,15.12427220703125,10.92426Q15.16606220703125,10.882480000000001,15.19889220703125,10.83334Q15.23172220703125,10.78421,15.25434220703125,10.729610000000001Q15.27695220703125,10.67501,15.288482207031251,10.617049999999999Q15.30001220703125,10.55909,15.30001220703125,10.5Q15.30001220703125,10.4409,15.288482207031251,10.382950000000001Q15.27695220703125,10.32499,15.25434220703125,10.270389999999999Q15.23172220703125,10.21579,15.19889220703125,10.16666Q15.16606220703125,10.117519999999999,15.12427220703125,10.07574Q15.082492207031251,10.03395,15.03335220703125,10.00112Q14.98422220703125,9.96829,14.929622207031251,9.94567Q14.87502220703125,9.92306,14.817062207031249,9.911529999999999Q14.759102207031251,9.9,14.70001220703125,9.9L8.70001220703125,9.9Q8.64091740703125,9.9,8.58295820703125,9.911529999999999Q8.524998207031249,9.92306,8.47040220703125,9.94567Q8.41580520703125,9.96829,8.36667020703125,10.00112Q8.31753420703125,10.03395,8.27574820703125,10.07574Q8.23396220703125,10.117519999999999,8.20113020703125,10.16666Q8.16829920703125,10.21579,8.14568420703125,10.270389999999999Q8.12307020703125,10.32499,8.11154120703125,10.382950000000001Q8.10001220703125,10.4409,8.10001220703125,10.5ZM8.70001220703125,14.1L10.95001220703125,14.1Q11.00910220703125,14.1,11.067062207031249,14.088470000000001Q11.12502220703125,14.07694,11.179622207031251,14.05433Q11.23422220703125,14.03171,11.28335220703125,13.99888Q11.332492207031251,13.96605,11.37427220703125,13.92426Q11.41606220703125,13.882480000000001,11.44889220703125,13.83334Q11.48172220703125,13.78421,11.50434220703125,13.729610000000001Q11.52695220703125,13.67501,11.538482207031251,13.617049999999999Q11.55001220703125,13.559090000000001,11.55001220703125,13.5Q11.55001220703125,13.440909999999999,11.538482207031251,13.382950000000001Q11.52695220703125,13.32499,11.50434220703125,13.270389999999999Q11.48172220703125,13.21579,11.44889220703125,13.16666Q11.41606220703125,13.117519999999999,11.37427220703125,13.07574Q11.332492207031251,13.03395,11.28335220703125,13.00112Q11.23422220703125,12.96829,11.179622207031251,12.94567Q11.12502220703125,12.92306,11.067062207031249,12.911529999999999Q11.00910220703125,12.9,10.95001220703125,12.9L8.70001220703125,12.9Q8.64091740703125,12.9,8.58295820703125,12.911529999999999Q8.524998207031249,12.92306,8.47040220703125,12.94567Q8.41580520703125,12.96829,8.36667020703125,13.00112Q8.31753420703125,13.03395,8.27574820703125,13.07574Q8.23396220703125,13.117519999999999,8.20113020703125,13.16666Q8.16829920703125,13.21579,8.14568420703125,13.270389999999999Q8.12307020703125,13.32499,8.11154120703125,13.382950000000001Q8.10001220703125,13.440909999999999,8.10001220703125,13.5Q8.10001220703125,13.559090000000001,8.11154120703125,13.617049999999999Q8.12307020703125,13.67501,8.14568420703125,13.729610000000001Q8.16829920703125,13.7842,8.20113020703125,13.83334Q8.23396220703125,13.882480000000001,8.27574820703125,13.92426Q8.31753420703125,13.96605,8.36667020703125,13.99888Q8.41580520703125,14.03171,8.47040220703125,14.05433Q8.524998207031249,14.07694,8.58295820703125,14.088470000000001Q8.64091740703125,14.1,8.70001220703125,14.1Z"
                                    fill-rule="evenodd" fill="#000000" fill-opacity="1" />
                            </g>
                            <g>
                                <path
                                    d="M15.15001220703125,8.1L17.70001220703125,8.1Q17.75910220703125,8.1,17.81706220703125,8.088470000000001Q17.87502220703125,8.07694,17.92962220703125,8.05433Q17.98422220703125,8.03171,18.03335220703125,7.99888Q18.08249220703125,7.96605,18.12427220703125,7.92426Q18.16606220703125,7.88248,18.19889220703125,7.83334Q18.23172220703125,7.78421,18.25434220703125,7.72961Q18.27695220703125,7.67501,18.28848220703125,7.61705Q18.30001220703125,7.559089999999999,18.30001220703125,7.5Q18.30001220703125,7.4409,18.28848220703125,7.38295Q18.27695220703125,7.32499,18.25434220703125,7.27039Q18.23172220703125,7.21579,18.19889220703125,7.16666Q18.16606220703125,7.11752,18.12427220703125,7.07574Q18.08249220703125,7.03395,18.03335220703125,7.00112Q17.98422220703125,6.96829,17.92962220703125,6.94567Q17.87502220703125,6.9230599999999995,17.81706220703125,6.91153Q17.75910220703125,6.9,17.70001220703125,6.9L15.30001220703125,6.9L15.30001220703125,4.5Q15.30001220703125,4.4409051999999996,15.28848320703125,4.382946Q15.27695420703125,4.324986,15.25434020703125,4.27039Q15.23172520703125,4.215793,15.19889420703125,4.166658Q15.16606220703125,4.117522,15.12427620703125,4.075736Q15.08249020703125,4.03395,15.03335420703125,4.001118Q14.98421920703125,3.968287,14.92962220703125,3.945672Q14.875026207031251,3.923058,14.81706620703125,3.911529Q14.75910700703125,3.9,14.70001220703125,3.9Q14.64091740703125,3.9,14.58295820703125,3.911529Q14.524998207031249,3.923058,14.47040220703125,3.945672Q14.41580520703125,3.968287,14.36667020703125,4.001118Q14.31753420703125,4.03395,14.27574820703125,4.075736Q14.23396220703125,4.117522,14.20113020703125,4.166658Q14.16829920703125,4.215793,14.14568420703125,4.27039Q14.12307020703125,4.324986,14.11154120703125,4.382946Q14.10001220703125,4.4409051999999996,14.10001220703125,4.5L14.10001220703125,7.05Q14.10001220703125,7.48492,14.40753520703125,7.7924500000000005Q14.71506930703125,8.1,15.15001220703125,8.1Z"
                                    fill-rule="evenodd" fill="#000000" fill-opacity="1" />
                            </g>
                            <g clip-path="url(#master_svg1_1_725)">
                                <g>
                                    <ellipse cx="17" cy="17" rx="4" ry="4" fill="#1878F5" fill-opacity="1" />
                                </g>
                                <g>
                                    <path
                                        d="M17.5,16.5L18.5,16.5Q18.54925,16.5,18.59754,16.50961Q18.64584,16.51921,18.69134,16.53806Q18.73684,16.55691,18.77778,16.58427Q18.81873,16.61162,18.85355,16.64645Q18.888370000000002,16.68127,18.91573,16.72221Q18.94309,16.76316,18.96194,16.80866Q18.98078,16.85416,18.99039,16.90245Q19,16.95075,19,17Q19,17.04925,18.99039,17.09754Q18.98078,17.14584,18.96194,17.19134Q18.94309,17.23684,18.91573,17.27778Q18.888370000000002,17.31873,18.85355,17.35355Q18.81873,17.38838,18.77778,17.41573Q18.73684,17.44309,18.69134,17.46194Q18.64584,17.48079,18.59754,17.49039Q18.54925,17.5,18.5,17.5L17.5,17.5L17.5,18.5Q17.5,18.54925,17.49039,18.59754Q17.48079,18.64584,17.46194,18.69134Q17.44309,18.73684,17.41573,18.77778Q17.38838,18.81873,17.35355,18.85355Q17.31873,18.888370000000002,17.27778,18.91573Q17.23684,18.94309,17.19134,18.96194Q17.14584,18.98078,17.09755,18.99039Q17.04925,19,17,19Q16.95075,19,16.90245,18.99039Q16.85416,18.98078,16.80866,18.96194Q16.76316,18.94309,16.72221,18.91573Q16.68127,18.888370000000002,16.64645,18.85355Q16.61162,18.81873,16.58427,18.77778Q16.55691,18.73684,16.53806,18.69134Q16.51921,18.64584,16.50961,18.59754Q16.5,18.54925,16.5,18.5L16.5,17.5L15.5,17.5Q15.4507543,17.5,15.4024549,17.49039Q15.354155,17.48079,15.308658,17.46194Q15.263161,17.44309,15.222215,17.41573Q15.181269,17.38838,15.146447,17.35355Q15.111625,17.31873,15.084265,17.27778Q15.056906,17.23684,15.03806,17.19134Q15.019214999999999,17.14584,15.009607,17.09755Q15,17.04925,15,17Q15,16.95075,15.009607,16.90245Q15.019214999999999,16.85416,15.03806,16.80866Q15.056906,16.76316,15.084265,16.72221Q15.111625,16.68127,15.146447,16.64645Q15.181269,16.61162,15.222215,16.58427Q15.263161,16.55691,15.308658,16.53806Q15.354155,16.51921,15.4024549,16.50961Q15.4507543,16.5,15.5,16.5L16.5,16.5L16.5,15.5Q16.5,15.4507543,16.50961,15.4024549Q16.51921,15.354155,16.53806,15.308658Q16.55691,15.263161,16.58427,15.222215Q16.61162,15.181269,16.64645,15.146447Q16.68127,15.111625,16.72221,15.084265Q16.76316,15.056906,16.80866,15.03806Q16.85416,15.019214999999999,16.90245,15.009607Q16.95075,15,17,15Q17.04925,15,17.09754,15.009607Q17.14584,15.019214999999999,17.19134,15.03806Q17.23684,15.056906,17.27778,15.084265Q17.31873,15.111625,17.35355,15.146447Q17.38838,15.181269,17.41573,15.222215Q17.44309,15.263161,17.46194,15.308658Q17.48079,15.354155,17.49039,15.4024549Q17.5,15.4507543,17.5,15.5L17.5,16.5Z"
                                        fill-rule="evenodd" fill="#FFFFFF" fill-opacity="1" />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div class="text">{{ t('home.New_file') }}</div>
                </div>
                <div class="right">
                    <svg-icon icon-class="add-icon"></svg-icon>
                </div>
            </div>
            <div class="openfile" @click="picker.invoke()">
                <div class="left">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                        version="1.1" width="24" height="24" viewBox="0 0 24 24">
                        <defs>
                            <clipPath id="master_svg0_1_743">
                                <rect x="0" y="0" width="24" height="24" rx="0" />
                            </clipPath>
                        </defs>
                        <g clip-path="url(#master_svg0_1_743)">
                            <g>
                                <path
                                    d="M2.9,11.25L2.9,6.45Q2.9,6.0150762,3.207538,5.707538Q3.5150762,5.4,3.95,5.4L8.58354,5.4Q8.97194,5.4,9.266860000000001,5.652782L11.59697,7.65L18.05,7.65Q18.4849,7.65,18.7925,7.9575499999999995Q19.1,8.265080000000001,19.1,8.7L19.1,11.25Q19.1,11.309090000000001,19.0885,11.367049999999999Q19.076900000000002,11.42501,19.054299999999998,11.479610000000001Q19.0317,11.53421,18.9989,11.58334Q18.966,11.632480000000001,18.924300000000002,11.67426Q18.8825,11.71605,18.8333,11.74888Q18.7842,11.78171,18.729599999999998,11.80433Q18.675,11.82694,18.6171,11.838470000000001Q18.5591,11.85,18.5,11.85L4.1,11.85L4.1,17.4L11,17.4Q11.059090000000001,17.4,11.117049999999999,17.4115Q11.17501,17.423099999999998,11.229610000000001,17.445700000000002Q11.28421,17.4683,11.33334,17.5011Q11.382480000000001,17.5339,11.42426,17.575699999999998Q11.46605,17.6175,11.49888,17.6667Q11.53171,17.7158,11.55433,17.770400000000002Q11.57694,17.825,11.58847,17.8829Q11.6,17.9409,11.6,18Q11.6,18.0591,11.58847,18.1171Q11.57694,18.175,11.55433,18.229599999999998Q11.53171,18.2842,11.49888,18.3333Q11.46605,18.3825,11.42426,18.424300000000002Q11.382480000000001,18.466,11.33334,18.4989Q11.28421,18.5317,11.229610000000001,18.554299999999998Q11.17501,18.576900000000002,11.117049999999999,18.5885Q11.059090000000001,18.6,11,18.6L3.95,18.6Q3.515079,18.6,3.207545,18.2925Q2.9,17.9849,2.9,17.55L2.9,11.25ZM4.1,10.65L17.9,10.65L17.9,8.85L11.5415,8.85Q11.152940000000001,8.85,10.85806,8.59714L8.52804,6.6L4.1,6.6L4.1,10.65Z"
                                    fill-rule="evenodd" fill="#000000" fill-opacity="1" />
                            </g>
                            <g>
                                <g>
                                    <ellipse cx="17" cy="17" rx="4" ry="4" fill="#46CDF7" fill-opacity="1" />
                                </g>
                                <g>
                                    <path
                                        d="M17.6,16.4L17.6,15.5Q17.6,15.4409052,17.58847,15.382946Q17.57694,15.324985999999999,17.55433,15.27039Q17.53171,15.215793,17.49888,15.166658Q17.46605,15.117522,17.42426,15.075736Q17.38248,15.03395,17.33334,15.001118Q17.28421,14.968287,17.22961,14.945672Q17.17501,14.923058,17.11705,14.911529Q17.05909,14.9,17,14.9Q16.94091,14.9,16.88295,14.911529Q16.82499,14.923058,16.77039,14.945672Q16.71579,14.968287,16.66666,15.001118Q16.61752,15.03395,16.57574,15.075736Q16.53395,15.117522,16.50112,15.166658Q16.468287,15.215793,16.445672,15.27039Q16.423058,15.324985999999999,16.411529,15.382946Q16.4,15.4409052,16.4,15.5L16.4,16.4L15.5,16.4Q15.4409052,16.4,15.382946,16.411529Q15.324985999999999,16.423058,15.27039,16.445672Q15.215793,16.468287,15.166658,16.50112Q15.117522,16.53395,15.075736,16.57574Q15.03395,16.61752,15.001118,16.66666Q14.968287,16.71579,14.945672,16.77039Q14.923058,16.82499,14.911529,16.88295Q14.9,16.94091,14.9,17Q14.9,17.05909,14.911529,17.11705Q14.923058,17.17501,14.945672,17.22961Q14.968287,17.28421,15.001118,17.33334Q15.03395,17.38248,15.075736,17.42426Q15.117522,17.46605,15.166658,17.49888Q15.215793,17.53171,15.27039,17.55433Q15.324985999999999,17.57694,15.382946,17.58847Q15.4409052,17.6,15.5,17.6L16.4,17.6L16.4,18.5Q16.4,18.55909,16.411529,18.61705Q16.423058,18.67501,16.445672,18.72961Q16.468287,18.78421,16.50112,18.83334Q16.53395,18.88248,16.57574,18.92426Q16.61752,18.96605,16.66666,18.99888Q16.71579,19.03171,16.77039,19.05433Q16.82499,19.07694,16.88295,19.08847Q16.94091,19.1,17,19.1Q17.05909,19.1,17.11705,19.08847Q17.17501,19.07694,17.22961,19.05433Q17.28421,19.03171,17.33334,18.99888Q17.38248,18.96605,17.42426,18.92426Q17.46605,18.88248,17.49888,18.83334Q17.53171,18.78421,17.55433,18.72961Q17.57694,18.67501,17.58847,18.61705Q17.6,18.55909,17.6,18.5L17.6,17.6L18.5,17.6Q18.55909,17.6,18.61705,17.58847Q18.67501,17.57694,18.72961,17.55433Q18.78421,17.53171,18.83334,17.49888Q18.88248,17.46605,18.92426,17.42426Q18.96605,17.38248,18.99888,17.33334Q19.03171,17.28421,19.05433,17.22961Q19.07694,17.17501,19.08847,17.11705Q19.1,17.05909,19.1,17Q19.1,16.94091,19.08847,16.88295Q19.07694,16.82499,19.05433,16.77039Q19.03171,16.71579,18.99888,16.66666Q18.96605,16.61752,18.92426,16.57574Q18.88248,16.53395,18.83334,16.50112Q18.78421,16.468287,18.72961,16.445672Q18.67501,16.423058,18.61705,16.411529Q18.55909,16.4,18.5,16.4L17.6,16.4Z"
                                        fill-rule="evenodd" fill="#FFFFFF" fill-opacity="1" />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div class="text">{{ t('home.open_local_file') }}</div>
                </div>
                <div class="right">
                    <svg-icon icon-class="add-icon"></svg-icon>
                </div>
            </div>
        </div>
    </Transition>
    <div class="main" :style="{ height: `calc(100vh - ${(route.name === 'recently' && show) ? '220px' : '144px'})` }">
        <RouterView @dataUpdate="update" />
    </div>
</template>

<style lang="scss" scoped>
.v-enter-active,
.v-leave-active {
    transition: opacity 0.2s ease-in-out;
}

.v-enter-from,
.v-leave-to {
    opacity: 0;
}

.fade-enter-active,
.fade-leave-active {
    transition: height 0.2s ease-in-out;
}

.fade-enter-from,
.fade-leave-to {
    height: 100%;
}

.newandopen {
    display: flex;
    align-items: center;
    margin: 0 32px;
    gap: 32px;

    .newfile,
    .openfile {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 260px;
        height: 56px;
        font-size: 14px;
        border-radius: 8px;
        border: 1px solid rgba(240, 240, 240, 1);
        box-sizing: border-box;

        &:hover {
            background-color: rgba(248, 248, 250, 1);
        }

        .left {
            display: flex;
            align-items: center;
            margin-left: 16px;

            svg {
                color: rgba(51, 51, 51, 1);
                width: 30px;
                height: 30px;
            }
        }

        .right {
            display: flex;
            align-items: center;
            margin-right: 16px;

            svg {
                width: 16px;
                height: 16px;
            }
        }

    }

}

.title {
    display: flex;
    margin: 24px 32px;
    box-sizing: border-box;

    .indicator {
        margin-top: 32px;
        position: absolute;
        height: 2px;
        background-color: rgba(24, 120, 245, 1);
        border-radius: 2px;
        transition: all 0.2s ease-in-out;
    }

    .container {
        display: flex;
        align-items: center;
        gap: 24px;

        .title-myfile,
        .title-mydel {
            line-height: 36px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 18px;
            color: #000;
        }
    }

    .title-text {
        line-height: 36px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        color: #000;

        .left {
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 2px;
        }

        .right {
            display: flex;
            gap: 12px;
            font-size: 14px;

            .newfile,
            .openfile {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 4px;
                width: 108px;
                height: 36px;
                border-radius: 6px;
                box-sizing: border-box;
            }

            .newfile {
                color: white;
                border: 1px solid rgba(24, 120, 245, 1);
                background-color: rgba(24, 120, 245, 1);

                &:hover {
                    background-color: rgba(51, 140, 255, 1);
                }

                &:active {
                    background-color: rgba(12, 111, 240, 1);

                }
            }

            .openfile {
                border: 1px solid rgba(240, 240, 240, 1);
                background-color: rgba(255, 255, 255, 0.1);

                &:hover {
                    background-color: rgba(247, 247, 249, 1);
                }

                &:active {
                    background-color: rgba(243, 243, 245, 1);
                }
            }

            svg {
                width: 16px;
                height: 16px;
            }
        }
    }
}

.main {
    margin: 24px 24px 0 24px;
    overflow: hidden;
}</style>